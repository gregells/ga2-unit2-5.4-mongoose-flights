<%- include('../partials/header') %>

<h1><%= title %></h1>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Airline</th>
      <th scope="col">Airport</th>
      <th scope="col">Flight No.</th>
      <th scope="col">Departure Date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= flight.airline %></td>
      <td><%= flight.airport %></td>
      <td><%= flight.flightNo %></td>
      <td><%= flight.departs.toLocaleString() %></td>
    </tr>
  </tbody>
</table>
<h5>Destinations:</h5>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Airport</th>
      <th scope="col">Departure Date</th>
    </tr>
  </thead>
  <tbody>
  <% flight.destinations.forEach(destination => { %>
    <tr>
      <td><%= destination.airport %></td>
      <td><%= destination.arrival.toLocaleString() %></td>
    </tr>
  <% }); %>
  </tbody>
</table>
<h5>Add a Destination:</h5>
<form action="/flights/<%= flight._id %>/destinations" method="POST">
  <div class="input-group mb-3">
    <div class="mb-3">
      <label for="airport" class="form-label">Airport:</label>
      <select name="airport" class="form-select" id="airport">
        <option value="AKL">AKL</option>
        <option value="WLG">WLG</option>
        <option value="YHZ">YHZ</option>
        <option value="YVR">YVR</option>
        <option value="YYZ">YYZ</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="arrival" class="form-label">Arrival Date:</label>
      <input type="datetime-local" class="form-control" name="arrival" id="arrival"
      >
    </div>
    <button type="submit" class="btn btn-primary">Add Destination</button>
  </div>
</form>
<p><%= errorMsg %></p>

<%- include('../partials/footer') %>
